# FF Poker Server v2

**OpenAPI æº–æ‹ ã®ç´”ç²‹é–¢æ•°å‹ã‚²ãƒ¼ãƒ ã‚¨ãƒ³ã‚¸ãƒ³ã‚’ä½¿ç”¨ã—ãŸãƒãƒ¼ã‚«ãƒ¼ã‚µãƒ¼ãƒãƒ¼**

[![Tests](https://img.shields.io/badge/tests-56%2F56%20passing-brightgreen)]()
[![Coverage](https://img.shields.io/badge/coverage-80%25%2B-green)]()
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue)]()
[![Node](https://img.shields.io/badge/node-%3E%3D20.0.0-brightgreen)]()

---

## ğŸ“‹ ç›®æ¬¡

- [æ¦‚è¦](#æ¦‚è¦)
- [ä¸»ãªæ©Ÿèƒ½](#ä¸»ãªæ©Ÿèƒ½)
- [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
- [ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—](#ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—)
- [ä½¿ã„æ–¹](#ä½¿ã„æ–¹)
- [APIä»•æ§˜](#apiä»•æ§˜)
- [é–‹ç™º](#é–‹ç™º)
- [ãƒ†ã‚¹ãƒˆ](#ãƒ†ã‚¹ãƒˆ)
- [ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—](#ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—)

---

## æ¦‚è¦

FF Poker Server v2ã¯ã€ãƒ†ã‚­ã‚µã‚¹ãƒ›ãƒ¼ãƒ«ãƒ‡ãƒ ãƒãƒ¼ã‚«ãƒ¼ã®ãƒãƒ«ãƒãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚²ãƒ¼ãƒ ã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚

### ç‰¹å¾´

- ğŸ¯ **OpenAPI 3.0æº–æ‹ ** - APIä»•æ§˜ã‚’å®Œå…¨å®šç¾©ã€Swagger UIã§ç¢ºèªå¯èƒ½
- ğŸ§ª **é«˜ã„ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸** - 56ã®çµ±åˆ/ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼ˆ100%ãƒ‘ã‚¹ï¼‰
- ğŸ”§ **ç´”ç²‹é–¢æ•°å‹ã‚¨ãƒ³ã‚¸ãƒ³** - fp-tsã‚’ä½¿ç”¨ã—ãŸå‰¯ä½œç”¨ã®ãªã„ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯
- ğŸš€ **RESTful API** - ã‚¯ãƒªãƒ¼ãƒ³ãªREST APIãƒ‡ã‚¶ã‚¤ãƒ³
- ğŸ“ **TypeScript** - å®Œå…¨ãªå‹å®‰å…¨æ€§

### ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±

- **ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 2.1.0
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: Phase 1-5 å®Œäº† (REST API + WebSocketå®Ÿè£…æ¸ˆã¿)
- **Node.js**: 20.x LTS
- **ä½œæˆæ—¥**: 2025-12-02
- **æœ€çµ‚æ›´æ–°**: 2025-12-03 (Phase 4 WebSocketå®Ÿè£…å®Œäº†)

---

## ä¸»ãªæ©Ÿèƒ½

### âœ… å®Ÿè£…æ¸ˆã¿

- [x] **ãƒ«ãƒ¼ãƒ ç®¡ç†**
  - ãƒ«ãƒ¼ãƒ ä½œæˆï¼ˆã‚«ã‚¹ã‚¿ãƒ ãƒ–ãƒ©ã‚¤ãƒ³ãƒ‰è¨­å®šï¼‰
  - ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å‚åŠ /é€€å‡º
  - ãƒ«ãƒ¼ãƒ æƒ…å ±å–å¾—

- [x] **ã‚²ãƒ¼ãƒ æ©Ÿèƒ½**
  - ã‚²ãƒ¼ãƒ é–‹å§‹ï¼ˆ2-9äººãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å¯¾å¿œï¼‰
  - ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ (fold, check, call, raise, allin)
  - ã‚¹ãƒ†ãƒ¼ã‚¸é€²è¡Œ (preflop â†’ flop â†’ turn â†’ river â†’ showdown)
  - ãƒãƒƒãƒˆç®¡ç†ï¼ˆãƒ¡ã‚¤ãƒ³ãƒãƒƒãƒˆã€ã‚µã‚¤ãƒ‰ãƒãƒƒãƒˆï¼‰

- [x] **API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**
  - REST API (Express)
  - OpenAPI 3.0ä»•æ§˜æ›¸
  - Swagger UIçµ±åˆ

- [x] **WebSocketé€šçŸ¥** (Phase 4) ğŸ†•
  - **ã‚·ãƒ³ãƒ—ãƒ«è¨­è¨ˆ**: é€šçŸ¥ã®ã¿é€ä¿¡ã€è©³ç´°ã¯REST APIã§å–å¾—
  - Socket.ioçµ±åˆ
  - æœ€å°é™ã®ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆroom:updatedã€errorï¼‰

- [x] **ãƒ†ã‚¹ãƒˆ**
  - ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ (35ãƒ†ã‚¹ãƒˆ)
  - çµ±åˆãƒ†ã‚¹ãƒˆ (29ãƒ†ã‚¹ãƒˆ)
  - ã‚¨ãƒ³ã‚¸ãƒ³ãƒ†ã‚¹ãƒˆ (198ãƒ†ã‚¹ãƒˆ)
  - 100%ãƒ‘ã‚¹ç‡ï¼ˆ262ãƒ†ã‚¹ãƒˆï¼‰

### ğŸ“… è¨ˆç”»ä¸­

- [ ] **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè£…** (Phase 6)
  - OpenAPIã‹ã‚‰TypeScriptã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè‡ªå‹•ç”Ÿæˆ
  - React UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Client Layer                     â”‚
â”‚           (å°†æ¥å®Ÿè£… - Phase 6)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ HTTP/REST          â†“ WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              API + WebSocket Layer                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  /api/v1/rooms  â”‚    â”‚ Socket.io       â”‚        â”‚
â”‚  â”‚   REST API      â”‚    â”‚ WebSocket       â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Service Layer (GameService)            â”‚
â”‚  - ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯                                   â”‚
â”‚  - Eitherå‹ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°                         â”‚
â”‚  - WebSocketé€šçŸ¥ãƒˆãƒªã‚¬ãƒ¼ (Notifierçµ±åˆ) âœ…           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GameManagerV2   â”‚              â”‚   GameNotifier   â”‚
â”‚  - Stateç®¡ç†     â”‚              â”‚  - Socket.ioé€šçŸ¥ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Engine Layer (ç´”ç²‹é–¢æ•°å‹ã‚¨ãƒ³ã‚¸ãƒ³)            â”‚
â”‚  - fp-ts ã«ã‚ˆã‚‹é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°                    â”‚
â”‚  - å‰¯ä½œç”¨ã®ãªã„ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯                          â”‚
â”‚  - 181ãƒ†ã‚¹ãƒˆã€96%ã‚«ãƒãƒ¬ãƒƒã‚¸                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
server-v2/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ openapi.yaml          # OpenAPI 3.0ä»•æ§˜æ›¸
â”‚   â”‚   â””â”€â”€ routes/
â”‚   â”‚       â”œâ”€â”€ rooms.ts          # ãƒ«ãƒ¼ãƒ ç®¡ç†API
â”‚   â”‚       â””â”€â”€ actions.ts        # ã‚²ãƒ¼ãƒ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³API
â”‚   â”œâ”€â”€ websocket/                # WebSocketå±¤ ğŸ†•
â”‚   â”‚   â”œâ”€â”€ events.ts             # ã‚¤ãƒ™ãƒ³ãƒˆå‹å®šç¾©
â”‚   â”‚   â”œâ”€â”€ notifier.ts           # é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”‚   â””â”€â”€ handler.ts            # Socket.ioãƒãƒ³ãƒ‰ãƒ©ãƒ¼
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ GameService.ts        # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤
â”‚   â”œâ”€â”€ managers/
â”‚   â”‚   â””â”€â”€ GameManager.ts        # çŠ¶æ…‹ç®¡ç†å±¤
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”œâ”€â”€ internal.ts           # å†…éƒ¨å‹å®šç¾©
â”‚   â”‚   â””â”€â”€ pokersolver.d.ts      # pokersolverå‹å®šç¾©
â”‚   â””â”€â”€ server.ts                 # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ helpers/
â”‚   â”‚   â””â”€â”€ testServer.ts         # ãƒ†ã‚¹ãƒˆç”¨ãƒ˜ãƒ«ãƒ‘ãƒ¼
â”‚   â”œâ”€â”€ websocket/                # WebSocketãƒ†ã‚¹ãƒˆ ğŸ†•
â”‚   â”‚   â””â”€â”€ Notifier.test.ts      # Notifierãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ managers/
â”‚   â”‚   â””â”€â”€ GameManager.test.ts   # GameManagerãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ GameService.test.ts   # GameServiceãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ engine/                   # ã‚¨ãƒ³ã‚¸ãƒ³ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â””â”€â”€ *.test.ts             # å„ç¨®ã‚¨ãƒ³ã‚¸ãƒ³ãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ integration/
â”‚       â”œâ”€â”€ api-game-flow.test.ts          # åŸºæœ¬çµ±åˆãƒ†ã‚¹ãƒˆ
â”‚       â””â”€â”€ api-game-flow-heads-up.test.ts # ãƒ˜ãƒƒã‚ºã‚¢ãƒƒãƒ—ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ jest.config.js
â”œâ”€â”€ README.md                     # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ HANDOVER.md                   # é–‹ç™ºå¼•ãç¶™ããƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â””â”€â”€ TEST_SCENARIOS.md             # ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªä¸€è¦§
```

---

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å¿…é ˆè¦ä»¶

- **Node.js**: 20.x LTSä»¥ä¸Š
- **npm**: 10.xä»¥ä¸Š

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
git clone <repository-url>
cd ff-poker/server-v2

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install
```

### ç’°å¢ƒå¤‰æ•°ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

```bash
# .env ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
PORT=3001
CORS_ORIGIN=http://localhost:5173
NODE_ENV=development
```

---

## ä½¿ã„æ–¹

### é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•

```bash
npm run dev
```

ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã™ã‚‹ã¨ä»¥ä¸‹ã®URLã§ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½:
- **API ã‚µãƒ¼ãƒãƒ¼**: http://localhost:3001
- **Swagger UI**: http://localhost:3001/api-docs
- **Health Check**: http://localhost:3001/health

### æœ¬ç•ªãƒ“ãƒ«ãƒ‰

```bash
# TypeScriptãƒ“ãƒ«ãƒ‰
npm run build

# æœ¬ç•ªã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm start
```

### åŸºæœ¬çš„ãªAPIã®ä½¿ã„æ–¹

#### 1. ãƒ«ãƒ¼ãƒ ä½œæˆ

```bash
curl -X POST http://localhost:3001/api/v1/rooms \
  -H "Content-Type: application/json" \
  -d '{
    "hostName": "Player1",
    "smallBlind": 10,
    "bigBlind": 20
  }'
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "roomId": "room-abc123",
  "hostId": "player-xyz789",
  "players": [...]
}
```

#### 2. ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å‚åŠ 

```bash
curl -X POST http://localhost:3001/api/v1/rooms/room-abc123/join \
  -H "Content-Type: application/json" \
  -d '{
    "playerName": "Player2"
  }'
```

#### 3. ã‚²ãƒ¼ãƒ é–‹å§‹

```bash
curl -X POST http://localhost:3001/api/v1/rooms/room-abc123/start
```

#### 4. ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ

```bash
curl -X POST http://localhost:3001/api/v1/rooms/room-abc123/actions \
  -H "Content-Type: application/json" \
  -d '{
    "playerId": "player-xyz789",
    "action": {
      "type": "raise",
      "amount": 40
    }
  }'
```

#### 5. ã‚²ãƒ¼ãƒ çŠ¶æ…‹å–å¾—

```bash
curl "http://localhost:3001/api/v1/rooms/room-abc123/state?playerId=player-xyz789"
```

---

## APIä»•æ§˜

### OpenAPIä»•æ§˜æ›¸

å®Œå…¨ãªAPIä»•æ§˜ã¯ä»¥ä¸‹ã§ç¢ºèªã§ãã¾ã™:
- **Swagger UI**: http://localhost:3001/api-docs (ã‚µãƒ¼ãƒãƒ¼èµ·å‹•å¾Œ)
- **YAML**: [src/api/openapi.yaml](./src/api/openapi.yaml)

### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§

#### ãƒ«ãƒ¼ãƒ ç®¡ç†

| Method | Endpoint | èª¬æ˜ |
|--------|----------|------|
| POST | `/api/v1/rooms` | ãƒ«ãƒ¼ãƒ ä½œæˆ |
| GET | `/api/v1/rooms/:roomId` | ãƒ«ãƒ¼ãƒ æƒ…å ±å–å¾— |
| POST | `/api/v1/rooms/:roomId/join` | ãƒ«ãƒ¼ãƒ å‚åŠ  |

#### ã‚²ãƒ¼ãƒ æ“ä½œ

| Method | Endpoint | èª¬æ˜ |
|--------|----------|------|
| POST | `/api/v1/rooms/:roomId/start` | ã‚²ãƒ¼ãƒ é–‹å§‹ |
| POST | `/api/v1/rooms/:roomId/actions` | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ |
| GET | `/api/v1/rooms/:roomId/state` | ã‚²ãƒ¼ãƒ çŠ¶æ…‹å–å¾— |

#### ãã®ä»–

| Method | Endpoint | èª¬æ˜ |
|--------|----------|------|
| GET | `/health` | ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ |
| GET | `/api/v1` | APIãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ± |
| GET | `/api-docs` | Swagger UI |

### ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ—

```typescript
type ActionType = 'fold' | 'check' | 'call' | 'raise' | 'allin';
```

### ã‚²ãƒ¼ãƒ ã‚¹ãƒ†ãƒ¼ã‚¸

```typescript
type Stage = 'preflop' | 'flop' | 'turn' | 'river' | 'showdown' | 'ended';
```

### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ¼ãƒ‰ç”Ÿæˆï¼ˆæœªå®Ÿè£…ï¼‰

**ç¾çŠ¶**: OpenAPIå®šç¾©ã®ã¿ä½œæˆæ¸ˆã¿

**Phase 6ã§å®Ÿè£…äºˆå®š**:
- OpenAPI Generatorã«ã‚ˆã‚‹TypeScriptã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè‡ªå‹•ç”Ÿæˆ
- å‹å®‰å…¨ãªAPIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
- React hooksçµ±åˆ

```bash
# å°†æ¥çš„ãªä½¿ç”¨ä¾‹ï¼ˆPhase 6ï¼‰
npm run generate:client
```

---

## é–‹ç™º

### ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ï¼ˆãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ï¼‰
npm run dev

# ãƒ“ãƒ«ãƒ‰
npm run build

# æœ¬ç•ªèµ·å‹•
npm start

# å‹ãƒã‚§ãƒƒã‚¯
npm run type-check

# ãƒªãƒ³ãƒˆ
npm run lint
```

### ãƒ†ã‚¹ãƒˆ

```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm test

# ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰
npm run test:watch

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆ
npm run test:coverage

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ
npm test -- --testPathPattern="GameManager"
npm test -- --testPathPattern="heads-up"
```

### ãƒ†ã‚¹ãƒˆçµæœ

```
âœ… GameManager.test.ts:             17/17 passed
âœ… GameService.test.ts:              10/10 passed
âœ… Notifier.test.ts:                  8/8 passed ğŸ†•ï¼ˆã‚·ãƒ³ãƒ—ãƒ«åŒ–ï¼‰
âœ… api-game-flow.test.ts:            13/13 passed
âœ… api-game-flow-heads-up.test.ts:   16/16 passed
âœ… Engine tests:                    198/198 passed

åˆè¨ˆ: 262/262 passed (100%)
```

è©³ç´°ãªãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªã¯ [TEST_SCENARIOS.md](./TEST_SCENARIOS.md) ã‚’å‚ç…§ã€‚

### ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®è¦ç´„ã¯ [../.claude/CLAUDE.md](../.claude/CLAUDE.md) ã‚’å‚ç…§ã€‚

**ä¸»è¦ãªè¦ç´„:**
- TypeScriptå³æ ¼ãƒ¢ãƒ¼ãƒ‰
- `any`å‹ç¦æ­¢ï¼ˆ`unknown`ã‚’ä½¿ç”¨ï¼‰
- é–¢æ•°ã®æˆ»ã‚Šå€¤å‹ã‚’æ˜ç¤º
- ESLint/Prettierã«ã‚ˆã‚‹è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
- Conventional Commitsã§ã®ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

#### 1. ãƒãƒ¼ãƒˆ3001ãŒæ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹

```bash
# ãƒ—ãƒ­ã‚»ã‚¹ç¢ºèª
lsof -i :3001

# ãƒ—ãƒ­ã‚»ã‚¹åœæ­¢
kill -9 <PID>

# ã¾ãŸã¯åˆ¥ã®ãƒãƒ¼ãƒˆã‚’ä½¿ç”¨
PORT=3002 npm run dev
```

#### 2. ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹

```bash
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
npm test -- --clearCache

# node_moduleså†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
rm -rf node_modules package-lock.json
npm install
```

#### 3. å‹ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹

```bash
# å‹ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ
npm run type-check

# engineå±¤ã®å‹å®šç¾©ã‚’ç¢ºèª
# server-v2ã¯../server/src/engine/ã‚’å‚ç…§
```

### ãƒ‡ãƒãƒƒã‚°

```bash
# ã‚µãƒ¼ãƒãƒ¼ãƒ­ã‚°ç¢ºèªï¼ˆé–‹ç™ºãƒ¢ãƒ¼ãƒ‰ï¼‰
npm run dev

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã‚’ãƒ‡ãƒãƒƒã‚°
npm test -- --testPathPattern="GameService" --verbose
```

---

## ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### Phase 1-5: å®Œäº† âœ…
- [x] OpenAPIå®šç¾©ã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [x] GameManagerV2ã¨GameServiceå®Ÿè£…
- [x] REST APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…
- [x] HTTPçµ±åˆãƒ†ã‚¹ãƒˆä½œæˆ
- [x] WebSocketã‚µãƒ¼ãƒãƒ¼å®Ÿè£… ğŸ†•
- [x] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥æ©Ÿèƒ½ ğŸ†•
- [x] Socket.ioçµ±åˆ ğŸ†•

### Phase 6: å°†æ¥è¨ˆç”» ğŸ“…
- [ ] TypeScriptã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè‡ªå‹•ç”Ÿæˆ
- [ ] React UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- [ ] WebSocketã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè£…

### è¿½åŠ æ©Ÿèƒ½
- [ ] Redis ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
- [ ] å†æ¥ç¶šãƒ­ã‚¸ãƒƒã‚¯
- [ ] ãƒ­ã‚®ãƒ³ã‚°ãƒ»ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°
- [ ] E2Eãƒ†ã‚¹ãƒˆï¼ˆPlaywrightï¼‰

---

## ä¾å­˜é–¢ä¿‚

### æœ¬ç•ªä¾å­˜

```json
{
  "express": "^4.18.2",
  "fp-ts": "^2.16.0",
  "socket.io": "^4.6.1",
  "swagger-ui-express": "^5.0.0",
  "uuid": "^9.0.0",
  "yaml": "^2.3.4",
  "cors": "^2.8.5"
}
```

### é–‹ç™ºä¾å­˜

```json
{
  "typescript": "^5.0.0",
  "jest": "^29.7.0",
  "supertest": "^6.3.3",
  "ts-jest": "^29.1.0",
  "ts-node-dev": "^2.0.0"
}
```

---

## è²¢çŒ®

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ãƒ¢ãƒãƒ¬ãƒæ§‹æˆã§ã™ã€‚

### ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥

```
main (æœ¬ç•ª)
  â””â”€ develop (é–‹ç™º)
       â”œâ”€ feature/æ©Ÿèƒ½å
       â”œâ”€ fix/ãƒã‚°å
       â””â”€ refactor/å¯¾è±¡
```

### ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

Conventional Commits ã‚’ä½¿ç”¨:

```
feat(api): Add WebSocket notification support
fix(game): Fix side pot calculation
docs(readme): Update API documentation
test(integration): Add heads-up game scenarios
```

---

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [HANDOVER.md](./HANDOVER.md) - é–‹ç™ºå¼•ãç¶™ããƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [TEST_SCENARIOS.md](./TEST_SCENARIOS.md) - ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªä¸€è¦§
- [../docs/migration/server-v2-migration-openapi.md](../docs/migration/server-v2-migration-openapi.md) - ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¨ˆç”»æ›¸
- [../server/src/engine/README.md](../server/src/engine/README.md) - ã‚¨ãƒ³ã‚¸ãƒ³ä»•æ§˜æ›¸
- [../.claude/CLAUDE.md](../.claude/CLAUDE.md) - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

---

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT

---

## ã‚µãƒãƒ¼ãƒˆ

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆ:
1. [TEST_SCENARIOS.md](./TEST_SCENARIOS.md) ã§ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªã‚’ç¢ºèª
2. [HANDOVER.md](./HANDOVER.md) ã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’å‚ç…§
3. Issueã‚’ä½œæˆ

---

**æœ€çµ‚æ›´æ–°**: 2025-12-03
**ãƒ¡ãƒ³ãƒ†ãƒŠ**: Claude Code
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 2.1.0
**Phase 4 WebSocketå®Ÿè£…å®Œäº†**: 2025-12-03
